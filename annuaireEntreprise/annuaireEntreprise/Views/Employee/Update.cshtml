@model annuaireEntreprise.ViewModels.ViewModelEmployee
<div class="container">
    <h1 class="text-center">Modifier employé</h1>
    <form id="form" class="container" asp-controller="Employee" asp-action="sendChanges" method="post">
        <fieldset>
            <div id="formulaire" class="text-center d-flex flex-column m-auto">

                <div class="form-group d-inline-flex">
                    <label class="mr-4 w-25">Prénom</label>
                    <input type="text" class="form-control w-25" name="firstname" value="@ViewData["firstname"]">
                </div>
                <div class="form-group d-inline-flex">
                    <label class="mr-4 w-25">Nom</label>
                    <input type="text" class="form-control w-25" name="lastname" value="@ViewData["lastname"]">
                </div>
                <div class="form-group d-inline-flex">
                    <label class="mr-4 w-25">Adresse e-mail</label>
                    <input type="text" class="form-control w-25" name="mail" value="@ViewData["mail"]">
                </div>
                <div class="form-group d-inline-flex">
                    <label class="mr-4 w-25">Numéro de télephone fixe</label>
                    <input type="text" class="form-control w-25" name="phone" value="@ViewData["phone"]">
                </div>
                <div class="form-group d-inline-flex">
                    <label class="mr-4 w-25">Numéro de télephone portable</label>
                    <input type="text" class="form-control w-25" name="mobilePhone" value="@ViewData["mobilePhone"]">
                </div>

                <div class="form-group d-inline-flex">
                    <label class="mr-4 w-25">Service</label>
                    <select class="form-control" onchange="ChangeValue('service',this.value);">

                        @foreach (Service s in Model.listeServices)
                        {
                            var id = @ViewData["idservice"].ToString();
                            //Si l'id du service de l'element séléctionné au préalable correspond à l'id de la liste des services générés ici, mettre ce service en préséléctionné
                            //(même fonctionnement pour la liste des sites ci-dessous)
                            if (@s.IdService.ToString() == id)
                            {
                                <option value="@s.IdService" selected>@s.NameService</option>

                            }
                            else
                            {
                                <option value="@s.IdService">@s.NameService</option>
                            }
                        }
                    </select>
                </div>
                <div class="form-group d-inline-flex">
                    <label class="mr-4 w-25">Site</label>
                    <select class="form-control" onchange="ChangeValue('site',this.value);">


                        @foreach (Site s in Model.listeSites)
                        {
                            var id = @ViewData["idsite"].ToString();
                            if (@s.IdSite.ToString() == id)
                            {
                                <option value="@s.IdSite" selected>@s.NameSite</option>

                            }
                            else
                            {
                                <option value="@s.IdSite">@s.NameSite</option>
                            }
                        }

                    </select>
                </div>
                <input type="hidden" class="form-control w-25" name="idEmployee" value="@ViewData["idEmployee"]">
                <input type="hidden" class="form-control w-25" name="idservice" id="idservice" value="@ViewData["idservice"]">
                <input type="hidden" class="form-control w-25" name="idsite" id="idsite" value="@ViewData["idsite"]">
            </div>
            @if (@ViewData["message"] != null)
            {
                <div class="alert alert-danger" role="alert">
                    @ViewData["message"]
                </div>
            }
            <div id="Button" class="text-center"><button type="submit" class="btn btn-outline-secondary ml-4 mr-4">Modifier</button></div>

        </fieldset>
    </form>
</div>
